计算机组成原理 操作系统  汇编语言 这三者其实是密不可分的



物理内存和虚拟内存

https://zhuanlan.zhihu.com/p/85760403

这块其实还有分页分段的相关知识，引申到逻辑地址，线性地址和物理地址。



为什么进程切换开销比线程大，线程切换的开销比协程大？

进程切换需要切换页表，刷新TLB（缓存），同时需要重新载入数据段和代码段，而同一个进程下多个线程是共享进程资源的，切换线程只需要保存线程运行的上下文，这其实就是更新几个寄存器。

协程是一种用户空间的线程，本质上来说，它可以自己决定什么时候交出cpu而不需要响应时钟阻塞，那么就减少了系统调用的次数。

具体分析 https://www.zhihu.com/question/20511233



在shell中启动一个进程，按下control+c后发生了什么？

http://docs.linuxtone.org/ebooks/C&CPP/c/ch33s01.html



为什么从用户态切换到内核态的开销比较大？

当从用户态切换到内核态，会发生中断，中断实际上是对cpu的一次请求，cpu收到信号后执行system_call

用户态的函数调用会使用用户栈，但是从用户态切换到内核态执行系统调用时使用的是内核栈，同时还会切换一系列寄存器，这种切换一定程度上破坏了局部性原理，使得原来的缓存失效。除了环境切换以外，系统还要执行安全性和一致性的检查。


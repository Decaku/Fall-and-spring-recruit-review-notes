这篇文章会补充一点MySQL的知识。

```
我也不知道这种问题的意义在哪，比如问你char和varchar的区别，纯粹就是为了筛选？（灵魂的拷问。。。）
这个repo建立的初心还是在于多学点东西，应付面试的话就看成是extra feature吧...
```



char和varchar的区别？

char类型在存储时会分配固定大小的空间，varchar类型存储时根据大小分配空间。所以varchar更节省空间，同时，char类型的空间如果没有用完，会用空格占位，而在读取时把变量全部读出后去掉空格，得到真实值。所以理论上来讲varchar的效率更高，因为char的IO读取了更多无用的数据。 但是，如果varchar类型的数据做了修改后，可能会导致原先的存储空间不够而需要扩张，此时难免会多出许多额外操作，比如需要重新分配空间拷贝数据，可能还会出现空间碎片。



Drop,truncate和delete的区别？

drop是直接释放表空间，可以理解为删除表

truncate是删除表里所有记录，删除操作不会记录日志，并且也不会触发任何删除触发器。truncate跟上reuse stroage，再重新导入/插入数据可以整理表碎片。

delete是删除一行，会记录日志以便回滚，会触发删除触发器

前两种删除不意味着不能恢复数据，只是不能回滚日志...

速度上drop > truncate > delete



MySQL缓存？

一句话概述，MySQL将查询语句和结果集做hash映射并缓存到内存里。 一旦出现相同的SQL语句就直接返回结果集合，注意只能缓存select语句。

由于是本质是hash了字符串，所以缓存对大小写，空格，符号等敏感。

* 缓存失效  一旦表的数据被修改或表结构改变，表的缓存就会全部失效
* 缓存不适用于分库分表的环境
* 如果查询中有触发器或者可变的函数/事件时，不会命中缓存
* 通过session技术，缓存可以被所有client共享

这块技术适用于重复查询多，但是更新少的表。否则频繁的计算hash或者清理cache内存反而影响性能。





数据库分库分表？

看看美团的这篇实践文章 https://tech.meituan.com/2016/11/18/dianping-order-db-sharding.html



